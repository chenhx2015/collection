// åˆ é™¤é“¾è¡¨ä¸­çš„èŠ‚ç‚¹
// é“¾è¡¨çš„åŸºæœ¬å®šä¹‰ï¼šé“¾è¡¨çš„åŸºæœ¬ç»“æ„æ˜¯ä¸€ç§å…·æœ‰èŠ‚ç‚¹çš„æœ‰åºç»“åˆï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰è‹¥å¹²ä¸ªé“¾æ¥ï¼ŒæŒ‡å‘å…¶ä»–èŠ‚ç‚¹ï¼›
// å…¶ä¸­ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å«åšå¤´èŠ‚ç‚¹ï¼Œæœ€åä¸€ä¸ªèŠ‚ç‚¹å«å°¾èŠ‚ç‚¹
// é“¾è¡¨çš„æ¯ä¸ªå…ƒç´ ç”±ä¸€ä¸ªå­˜å‚¨å…ƒç´ æœ¬èº«çš„èŠ‚ç‚¹å’ŒæŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ çš„å¼•ç”¨ï¼ˆæŒ‡é’ˆï¼‰ç»„æˆ
// å®ƒç±»ä¼¼äºç«è½¦ï¼Œç«è½¦å¤´å°±æ˜¯å¤´èŠ‚ç‚¹ï¼Œç«è½¦è½¦å¢ä¹‹é—´çš„è¿æ¥ç±»ä¼¼äºæŒ‡é’ˆï¼Œç«è½¦ä¸Šçš„ä¹˜å®¢ç±»ä¼¼äºæ•°æ®ã€‚

// ğŸŒ¹ æ•°ç»„ VS é“¾è¡¨
// é“¾è¡¨å’Œæ•°ç»„çš„å®ç°æœºåˆ¶å®Œå…¨ä¸åŒ
// ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¦å­˜å‚¨å¤šä¸ªå…ƒç´ ï¼Œæ•°ç»„å¯èƒ½æ˜¯æœ€å¸¸ç”¨çš„æ•°æ®ç»“æ„ã€‚
// ä½†æ˜¯ä½¿ç”¨æ•°ç»„ğŸ˜„å­˜å‚¨æœ‰ä¸€äº›ç¼ºç‚¹ï¼š
// 1.æ•°ç»„çš„åˆ›å»ºéœ€è¦ç”³è¯·ä¸€æ®µè¿ç»­çš„å†…å­˜ç©ºé—´ï¼ˆä¸€æ•´å—çš„å†…å­˜ï¼‰ï¼Œå¹¶ä¸”å¤§å°æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥å½“å½“å‰æ•°ç»„ä¸èƒ½æ»¡è¶³å®¹é‡éœ€æ±‚æ—¶ï¼Œå°±éœ€è¦æ‰©å®¹ï¼ˆä¸€èˆ¬æƒ…å†µä¸‹ä¼šç”³è¯·ä¸€ä¸ªæ›´å¤§çš„æ•°ç»„ï¼Œæ¯”å¦‚2å€ï¼Œç„¶åå°†åŸæ•°ç»„ä¸­çš„å…ƒç´ å¤åˆ¶è¿‡å»ï¼‰ã€‚
// 2.åœ¨æ•°ç»„çš„å¼€å¤´æˆ–ä¸­é—´ä½ç½®æ’å…¥æ•°æ®çš„æˆæœ¬å¾ˆé«˜ï¼Œéœ€è¦è¿›è¡Œå¤§é‡å…ƒç´ çš„ä½ç§»ã€‚

// å­˜å‚¨å¤šä¸ªå…ƒç´ çš„å¦ä¸€ä¸ªé€‰æ‹©å°±æ˜¯é“¾è¡¨ï¼Œä½†æ˜¯ä¸åŒäºæ•°ç»„ï¼Œé“¾è¡¨ä¸­çš„å…ƒç´ åœ¨å†…å­˜ä¸­ä¸å¿…æ˜¯è¿ç»­çš„ç©ºé—´ï¼Œé“¾è¡¨çš„æ¯ä¸ªå…ƒç´ ç”±ä¸€ä¸ªå­˜å‚¨å…ƒç´ æœ¬èº«çš„èŠ‚ç‚¹å’ŒæŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ çš„å¼•ç”¨ï¼ˆæŒ‡é’ˆï¼‰ç»„æˆ

// é“¾è¡¨æœ‰ä¸€äº›ä¼˜åŠ¿ï¼š
// 1.å†…å­˜ç©ºé—´ä¸æ˜¯å¿…é¡»è¿ç»­çš„ï¼Œå¯ä»¥å……åˆ†åˆ©ç”¨è®¡ç®—æœºçš„å†…å­˜ï¼Œå®ç°çµæ´»çš„å†…å­˜åŠ¨æ€ç®¡ç†ï¼›
// 2.é“¾è¡¨ä¸å¿…åœ¨åˆ›å»ºæ—¶å°±ç¡®å®šå¤§å°ï¼Œå¹¶ä¸”å¤§å°å¯ä»¥æ— é™å»¶ä¼¸ä¸‹å»ï¼›
// 3.é“¾è¡¨åœ¨æ’å…¥å’Œåˆ é™¤æ•°æ®æ—¶ï¼Œæ—¶é—´å¤æ‚åº¦å¯ä»¥è¾¾åˆ°O(1)ï¼Œç›¸å¯¹æ•°ç»„æ•ˆç‡é«˜å¾ˆå¤šï¼›

// é“¾è¡¨ä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹ï¼š
// 1.é“¾è¡¨è®¿é—®ä»»ä½•ä¸€ä¸ªå…ƒç´ çš„ä½ç½®æ—¶ï¼Œéƒ½éœ€è¦ä»å¤´å¼€å§‹è®¿é—®ï¼Œå¹¶ä¸”æ— æ³•è·³è¿‡ç¬¬ä¸€ä¸ªå…ƒç´ è®¿é—®ä»»ä½•ä¸€ä¸ªå…ƒç´ 
// 2.é“¾è¡¨æ— æ³•é€šè¿‡ä¸‹æ ‡ç›´æ¥è®¿é—®å…ƒç´ ï¼Œéœ€è¦ä»å¤´ä¸€ä¸ªä¸ªè®¿é—®ï¼Œç›´åˆ°æ‰¾åˆ°å¯¹åº”çš„å…ƒç´ 

// æ•°ç»„ï¼šå¢åˆ éé¦–å°¾å…ƒç´ æ—¶å¾€å¾€éœ€è¦ç§»åŠ¨å…ƒç´ 
// é“¾è¡¨ï¼šå¢åˆ éé¦–å°¾å…ƒç´ ï¼Œä¸è®¸è¦ç§»åŠ¨å…ƒç´ ï¼Œåªéœ€è¦æ›´æ”¹nextçš„æŒ‡å‘å³å¯ğŸŒ¿ã€‚

// é“¾è¡¨çš„åŸºæœ¬æ“ä½œï¼š
// æ’å…¥èŠ‚ç‚¹ï¼šé“¾è¡¨çš„ insertï¼ˆï¼‰å‡½æ•°æ¥å®Œæˆï¼›æœ‰å°¾éƒ¨æ’å…¥å’Œä¸­é—´æ’å…¥
// åˆ é™¤èŠ‚ç‚¹ï¼šé“¾è¡¨çš„ removeï¼ˆï¼‰å‡½æ•°æ¥å®Œæˆï¼›æœ‰å¤´éƒ¨åˆ é™¤å’Œä¸­é—´åˆ é™¤
// æŸ¥æ‰¾èŠ‚ç‚¹ï¼šé“¾è¡¨çš„ findï¼ˆï¼‰å‡½æ•°æ¥å®Œæˆ
// éå†èŠ‚ç‚¹ï¼šé“¾è¡¨çš„ traverseï¼ˆï¼‰å‡½æ•°æ¥å®Œæˆ
// æ›´æ–°èŠ‚ç‚¹ï¼šé“¾è¡¨çš„ updateï¼ˆï¼‰å‡½æ•°æ¥å®Œæˆ

// è¯´æ˜ï¼šjsä¸­æ²¡æœ‰é“¾è¡¨ï¼Œå¯æ¨¡æ‹Ÿå®ç°è€Œå·²ï¼›jså®ç°çš„é“¾è¡¨éƒ½æ˜¯å•å‘é“¾è¡¨ ğŸ¤”ï¸ï¼Ÿ

// å®šä¹‰èŠ‚ç‚¹
class Node {
  // æ„é€ å‡½æ•°
  constructor(val) {
    this.val = val;
    this.next = null;
  }
}
class LinkedList {
  // é“¾è¡¨ç±»
  // æ„é€ å‡½æ•°
  constructor() {
    this.head = null;
    this.length = 0;
  }
  // æ–°å¢èŠ‚ç‚¹
  append(val) {
    let node = new Node(val);
    let current; // æš‚å­˜å½“å‰ä½ç½®
    if(this.head === null) {
      this.head = node;
    } else {
      current = this.head;
      while(current.next) { // éå†æ‰¾åˆ°é“¾è¡¨å°¾éƒ¨
        current = current.next;
      }
      current.next = node; // åœ¨é“¾è¡¨å°¾éƒ¨æ‰¾åˆ°æ–°èŠ‚ç‚¹
    }
    this.length++; // æ›´æ–°é“¾è¡¨é•¿åº¦
  }

  // åˆ é™¤èŠ‚ç‚¹ï¼Œå¹¶è·å–èŠ‚ç‚¹çš„å€¼
  removeAt(index) {
    if(index > -1 && index <= this.length) { // é¢„é˜²ä¸‹æ ‡è¶Šç•Œ
      let current = this.head; // æš‚å­˜å½“å‰ä½ç½®
      let previous; // æš‚å­˜å½“å‰ä½ç½®çš„å‰ä¸€ä¸ª
      let position = 0;
      if(index === 0) {
        this.head = current.next; // è¦åˆ é™¤çš„æ˜¯ç¬¬ä¸€ä¸ªä½ç½®ï¼Œå°±å¾—æ”¹å˜å¤´æŒ‡é’ˆæŒ‡å‘
      } else {
        while(position++ < index) {
          previous = current;
          current = current.next; // æ­¤æ—¶ current å¤„äº index å¤„
        }
        previous.next = current.next; // æ”¹å˜é“¾è¡¨ç»“æ„ï¼Œè·³è¿‡ index å¤„
      }
      this.length--; // æ›´æ–°é“¾è¡¨é•¿åº¦
      return current.val; // è¿”å› index å¤„çš„å€¼
    } else  {
      return null; // ä¸‹æ ‡è¶Šç•Œè¿”å›ç©º
    }
  }

  // æ’å…¥èŠ‚ç‚¹
  insert(index, val) {
    if(index > -1 && index <= this.length) {
      let node = new Node(val);
      let current = this.head;
      let previous;
      let position = 0;
      if(index === 0) {
        node.next = current;
        this.head = node;
      } else {
        while(position++ < index) {
          previous = current;
          current = current.next;
        }
        node.next = current;
        previous.next = node;
      }
      length++;
      return true; // æ’å…¥æˆåŠŸ
    } else {
      return false; // æ’å…¥å¤±è´¥
    }
  }

  // è·å–ç´¢å¼•
  indexOf(val) {
    let current = this.head;
    let position = 0;
    while(current) {
      if(current.val === val) {
        return position;
      }
      position++;
      current = current.next;
    }
    return -1; //æœªæ‰¾åˆ°ç´¢å¼•
  }

  // å°†é“¾è¡¨è½¬æ¢æˆå­—ç¬¦ä¸²
  toString() {
    let current = this.head;
    let string = '';
    while(current) {
      string += current.val + ((current.next ? ',' : ''));
      current = current.next;
    }
    return string;
  }

  // é“¾è¡¨é•¿åº¦
  size() {
    return this.length;
  }

  // åˆ¤æ–­é“¾è¡¨æ˜¯å¦ä¸ºç©º
  isEmpty() {
    return this.length === 0;
  }

  // é¢˜ç›®ä¸€ï¼š
  // è¯·ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºåˆ é™¤å•é“¾è¡¨ä¸­æŸä¸ªç‰¹å®šèŠ‚ç‚¹ï¼Œåœ¨è®¾è®¡å‡½æ•°æ—¶éœ€è¦æ³¨æ„ï¼Œä½ æ— æ³•è®¿é—®é“¾è¡¨çš„å¤´èŠ‚ç‚¹headï¼Œåªèƒ½ç›´æ¥è®¿é—®è¦è¢«åˆ é™¤çš„èŠ‚ç‚¹ï¼ˆé¢˜ç›®æ•°æ®ä¿è¯éœ€è¦åˆ é™¤çš„èŠ‚ç‚¹ä¸æ˜¯æœ«å°¾èŠ‚ç‚¹ï¼‰
  // è¾“å…¥ï¼š head = [4, 5, 1, 9],  node = 5
  // è¾“å‡ºï¼š [4, 1, 9]
  // è§£é¢˜æ€è·¯ï¼šé¢˜ç›®ç›´æ¥ç»™å‡ºäº†å½“å‰èŠ‚ç‚¹ï¼Œåªéœ€è¦ä¸‹ä¸€ä½èŠ‚ç‚¹è¦†ç›–æ‰å½“å‰èŠ‚ç‚¹ï¼Œå°±å¯ä»¥åˆ é™¤å…ƒç´ 
  // ğŸ¤”ï¸ å¥½åƒæœ‰ç‚¹é—®é¢˜
  // æ—¶é—´å¤æ‚åº¦O(1), ç©ºé—´å¤æ‚åº¦O(1)
  // deleteNode(node) {
  //   node.val = node.next.val;
  //   node.next = node.next.next;
  // }

  // é¢˜ç›®äºŒï¼šåè½¬é“¾è¡¨
  // æ–¹æ³•ä¸€ï¼šè¿­ä»£
  // æ—¶é—´å¤æ‚åº¦O(n), ç©ºé—´å¤æ‚åº¦O(1)
  reverse() {
    let cur = this.head; // æ­£å‘é“¾è¡¨çš„å¤´æŒ‡é’ˆ
    let pre = null; // åå‘é“¾è¡¨çš„å¤´æŒ‡é’ˆ
    while (cur) {
      const temp = cur.next; // æš‚å­˜å½“å‰èŠ‚ç‚¹çš„åç»­èŠ‚ç‚¹ï¼Œç”¨äºæ›´æ–°æ­£å‘é“¾è¡¨
      cur.next = pre; // å°†å½“å‰èŠ‚ç‚¹æŒ‡å‘åå‘é“¾è¡¨ï¼Œè¿™æ˜¯ä¸€ä¸ªå»ºç«‹åå‘é“¾æ¥çš„è¿‡ç¨‹
      pre = cur; // æ›´æ–°åå‘é“¾è¡¨çš„å¤´æŒ‡é’ˆä¸ºå½“å‰å·²å¤„ç†çš„èŠ‚ç‚¹ï¼Œåå‘é“¾è¡¨çš„è¯¥è½®æ„å»ºå®Œæˆ
      cur = temp; // å°†æ­£å‘é“¾è¡¨å¤´æŒ‡é’ˆæ›¿æ¢ä¸ºæš‚å­˜çš„èŠ‚ç‚¹ï¼Œæ­£å‘é“¾è¡¨å¤„ç†å®Œæˆï¼Œå¼€å§‹ä¸‹ä¸€è½®å¤„ç†
    }
    return pre;
  }
}

// æµ‹è¯•æ•°æ®
let linkedList = new LinkedList();
linkedList.append(1);
linkedList.append(3);
linkedList.append(4);
linkedList.append(7);
console.log('é“¾è¡¨é•¿åº¦ï¼š', linkedList.length); // 4
console.log(linkedList.removeAt(2));
console.log('toString', linkedList.toString()); // 1,3,7
console.log('reverse', linkedList.reverse()); // 7, 3, 1
